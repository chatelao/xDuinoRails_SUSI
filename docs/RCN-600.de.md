## Norm

```
SUSI-Bus
Modul-Erweiterungsschnittstelle
```
```
RailCommunity – Verband
der Hersteller Digitaler
Modellbahnprodukte e.V.
```
         - RCN-
      - Ausgabe
- 1 Allgemeines Inhalt
   - 1.1 Zweck der Norm
   - 1.2 Anforderungen
- 2 Mechanische Eigenschaften
   - 2.1 classicSUSI-Schnittstelle
   - 2.2 microSUSI-Schnittstelle
   - 2.3 powerSUSI-Schnittstelle
- 3 Elektrische Eigenschaften
   - 3.1 classicSUSI-Schnittstelle
   - 3.2 microSUSI-Schnittstelle
   - 3.3 powerSUSI-Schnittstelle
   - 3.4 Decoder-Schnittstelle
   - 3.5 Gemeinsame Eigenschaften
   - 3.6 Logikpegel an der Schnittstelle
- 4 Protokoll
- 5 Befehle
- Anhang A: Verweise auf andere Normen
   - A.1 Normative Verweise
   - A.2 Informative Verweise
- Anhang B: Historie
- Anhang C: Befehlsübersicht
- Anhang D: Erkannte Probleme mit Inkompatibilitäten zur Norm
   - D.1 Datensenderate
   - D.2 Datensignal im Ruhepegel
   - D.3 Synchronisierung der Datenübertragung
   - D.4 Acknowledge-Dauer
   - D.5 Zugriffe auf CVs unter
   - D.6 Bekannte Protokoll-Inkompatibilitäten
- Anhang E: Schaltungsbeispiel für Decoder mit Vcc = 3,3 V


## 1 Allgemeines Inhalt

### 1.1 Zweck der Norm

Diese Norm beschreibt eine Schnittstelle zwischen einem
Hauptmodul, im Weiteren als Host bezeichnet, und Erweiterungs-
Modulen, im Weiteren als SUSI-Module bezeichnet, in einem
Modell. Dies können Soundbausteine, erweiterte Funktionsaus-
gänge oder sonstige Funktionsmodule sein. Der Name ist die
Abkürzung von: "Serial User Standard Interface".

Das SUSI-Logo ist ein Warenzeichen der Dietz Elektronik GmbH & Co.KG. Es kann bei
kompatiblen Produkten frei verwendet werden.

### 1.2 Anforderungen

Um diese Norm zu erfüllen, müssen alle genannten mechanischen und elektrischen
Kennwerte sowie die definierten Befehle eingehalten werden. Es ist nicht erforderlich, alle
Befehle der Schnittstelle zu unterstützen. Dies gilt sowohl für den Host als auch für die SUSI-
Module. In der Beschreibung des jeweiligen Produktes sollten die nutzbaren / nötigen
Funktionen aufgelistet werden. Bei allen genannten Widerstandswerten ist eine
Bauteiletoleranz von 10% zulässig.

## 2 Mechanische Eigenschaften

Es gibt drei verschiedene Stecksysteme, die sich auch in ihren elektrischen Werten
unterscheiden.

Bezeichnung Steckertyp Belastbarkeit
classicSUSI JST *M04B-SRSS-TB 1000 mA
microSUSI JST 04XSR-36S 200 mA
powerSUSI WTB 2.0 5-polig 2000 mA

"classicSUSI" ist die seit 2003 bekannte Schnittstelle, wie sie überwiegend bei H0 verwendet
wird. "microSUSI" ist eine 2017 eingeführte kleine Bauform z.B. für Baugröße N.
"powerSUSI" wurde 2018 für größere Spurweiten und SUSI-Module mit höherem Strombe-
darf ergänzt. Die drei Versionen werden in den folgenden Abschnitten näher beschrieben.
Alternativ können für den Anschluss auch Lötpunkte statt eines Steckers vorgesehen werden.
Zusätzlich ist es auch möglich, ein SUSI-Modul an eine zweite Decoder-Schnittstelle im
Fahrzeug entsprechend [RCN- 118 ], [RCN- 121 ] oder [RCN- 122 ] anzuschließen.

### 2.1 classicSUSI-Schnittstelle

Verwendet wird ein 4poliges Stecksystem von JST
sowie dazu kompatible. Die empfohlene Stiftleiste
auf dem Host ist "JST SM04B-SRSS-TB" (liegend)
oder "JST BM04B-SRSS-TB" (stehend). Die dazu
passenden Kabelstecker sind "JST 04SR3S" oder
"JST SRH-04V-S-B". Wenn das SUSI-Modul
ebenfalls eine Steckbuchse besitzt erfolgt die


Verkabelung 1:1 (elektrisch symmetrisch).

### 2.2 microSUSI-Schnittstelle

Verwendet wird ein 4poliges Stecksystem von JST sowie dazu
kompatible. Die empfohlene Stiftleiste auf dem Host ist "JST SM04B-
XSRS-ETB". Die dazu passenden Kabelstecker sind "JST 04XSR-
36S". Datenblatt bei JST

### 2.3 powerSUSI-Schnittstelle

Verwendet wird ein 5poliges Stecksystem von Würth Elektronik
WR-WTB mit 2,0 mm Raster. Stecker typen:
THT stehend 620 005 116 22, THT liegend 620 005 117 22, SMT stehend 620 305 124 022,
SMT liegend 620 105 131 822.

Im Bild rechts der powerSUSI-Stecker im Vergleich zu classicSUSI (unten).

## 3 Elektrische Eigenschaften

### 3.1 classicSUSI-Schnittstelle

Die Belastbarkeit der classicSUSI-Schnittstelle beträgt maximal 1000 mA.

Die Schnittstelle hat vier Pole:
1 Masse (Decoder − hinter dem Gleichrichter)
2 Daten
3 Takt
4 Plus (Decoder + hinter dem Gleichrichter)


### 3.2 microSUSI-Schnittstelle

Die Belastbarkeit der microSUSI-Schnittstelle beträgt maximal 200 mA.

Die Schnittstelle hat vier Pole:
1 Masse (Decoder − hinter dem Gleichrichter)
2 Daten
3 Takt
4 Plus (Decoder + hinter dem Gleichrichter)

### 3.3 powerSUSI-Schnittstelle

Die Belastbarkeit der powerSUSI-Schnittstelle beträgt maximal 2000 mA.

Die Schnittstelle hat fünf Pole:
1 Trigger (Open-Kollektor-Signal bzw. Kontakt nach Masse zur Synchronisation)
2 Masse (Decoder − hinter dem Gleichrichter)
3 Daten
4 Takt
5 Plus (Decoder + hinter dem Gleichrichter)

Die powerSUSI-Schnittstelle ist mit der höheren Belastbarkeit auch für Dampferzeuger
geeignet und das zusätzliche Trigger-Signal ermöglicht radsynchrone Dampfstöße, ohne
ständig Trigger-Befehle zu senden. Dabei bestimmt die fallende Flanke den Zeitpunkt.
Der Pull-up Widerstand für das Open Kollektor Trigger-Signal befindet sich auf dem SUSI-
Modul, ist an Vcc des SUSI-Moduls angeschlossen und sollte 4,7 kOhm bis 22 kOhm
betragen.

### 3.4 Decoder-Schnittstelle

Bei der Verwendung einer 2. Decoder-Schnittstelle im Fahrzeug zum Aufstecken eines SUSI-
Moduls sind die Festlegungen in der [RCN- 118 ], [RCN- 121 ] bzw. [RCN- 122 ] einzuhalten.

```
Signal RCN-118 Next18/Next18S RCN- 121 21 MTC RCN-122 PluX
Masse 5 und 14 20 5
Daten 13 6 4
Takt 4 5 3
Plus 6 und 15 16 9
```
Nur die vier genannten Signale werden direkt mit dem Decoder verbunden. Insbesondere die
Gleisanschlüsse werden bei Verwendung als SUSI-Schnittstelle nicht beschaltet. Alle
weiteren Anschlüsse können für die Funktionen des SUSI-Moduls verwendet werden.

### 3.5 Gemeinsame Eigenschaften

Empfohlene Kabelfarben bei den 4-poligen Schnittstellen:

```
1 Masse schwarz
2 Daten grau
3 Takt blau
4 Plus rot
```

Es können bis zu 3 SUSI-Module an einen Host angeschlossen werden. Die SUSI-Module
werden alle parallel angeschlossen. Hierzu werden entsprechende Adapterkabel oder
Verteilermodule benötigt.

Bezüglich der Belastbarkeit gilt bei allen Versionen: Bei einer geringeren Belastbarkeit des
Hosts muss dies angegeben werden. Bei jedem SUSI-Modul muss die maximale
Stromaufnahme genannt werden, die über den Busanschluss fließt. Wird in einem SUSI-
Modul mehr Strom benötigt, so ist dieses gesondert mit Strom zu versorgen. Beim Anschluss
mehrerer SUSI-Module an einen Host darf dessen Gesamtbelastbarkeit nicht überschritten
werden.

Am Plus-Anschluss des SUSI-Moduls sollte eine Verpolungsschutzdiode in Serie eingebaut
sein, damit es bei einer Verpolung nicht zum Defekt kommt.

Ein High-Pegel darf den Wert von 0,7 × Vcc nicht unterschreiten. Beide Leitungen enthalten
je einen Serienwiderstand von 470 Ω am Host und am SUSI-Modul. Die Datenleitung erhält
einen Pull-Up-Widerstand von ≥ 15 kΩ an Vcc auf dem Host.

### 3.6 Logikpegel an der Schnittstelle

Es sind sowohl Pegel entsprechend Vcc = 5 V und Vcc = 3,3 V zulässig. Dabei gelten

folgende Regeln:

```
 Grundsätzlich sind die unterstützten Pegel in der Anleitung anzugeben.
 Jedes SUSI-Modul muss 5V-Pegel tolerieren.
 Ein SUSI-Modul für microSUSI muss auch 3,3V-Pegel akzeptieren.
 Ein SUSI-Modul, das auch 3,3V-Pegel akzeptiert, kann mit „SUSI3“ gekennzeichnet
werden.
 Ein Host, der nur 3,3V-Pegel liefert, muss mit „SUSI3“ gekennzeichnet werden.
Davon ausgenommen sind nur Hosts mit microSUSI Buchse
```
Für den Anwender bedeutet das, dass an einem Host mit „SUSI3“ Kennzeichnung nur SUSI-
Module mit „SUSI3“-Kennzeichnung sicher betrieben werden können. Werden Hosts und

SUSI-Module mit micoSUSI Buchse und Stecker verwendet, ist die Kompatibilität auch

sichergestellt. Soll ein Host mit Vcc = 3,3 V trotzdem 5V-Pegel liefern, um universell

einsetzbar zu sein, ist eine Schaltung zur Pegelanpassung erforderlich. Ein Vorschlag befindet

sich im Anhang E.


## 4 Protokoll

Die Datenübertragung ist eine synchrone unidirektionale bzw. Halbduplexverbindung.

Alle Pakete sind das Zweifache – oder in einem Ausnahmefall das Dreifache – von 8-bit. Der
Takt ist im inaktiven Zustand low. Daten werden mit der steigenden Flanke gesendet und
müssen bei der fallenden Flanke gültig sein. Die Daten müssen mit der fallenden Flanke
gelesen werden.

Zukünftige Erweiterungen dürfen generell nur 2-Byte-Pakete sein. Der genannte Ausnahme-
fall sind die Befehle, die mit dem Befehlscode 0111-xxxx beginnen. Das sind die direkt 1:
vom DCC-Protokoll übernommenen Programmierbefehle zur CV-Manipulation mit 3 Byte.

Die High- bzw. Lowperiode des Taktpulses muss ≥ 10 μs sein, die Gesamtperiode für ein
Bit darf nur maximal 500 μs betragen. Beim Auslesen einer CV-Bank mittels SUSI-BiDi-
Befehlen darf die Gesamtperiode für ein Bit nur maximal 100 μs betragen Der Host liefert
immer den Taktimpuls für die Datenübertragung. Das erste übertragene Bit ist das LSB (Bit
0).

Da bei einer synchronen Übertragung ein einzelner Störimpuls auf der Taktleitung zur
permanenten Verschiebung der Daten führt, wird ein spezielles Timing zur Synchronisation
verwendet.

8 ms ±1 ms nachdem ein komplettes Byte eingetroffen ist werden alle bisher eingetroffenen
Bits gelöscht und das SUSI-Modul zurückgesetzt. Dies gilt sowohl innerhalb als auch
außerhalb eines Befehls.

Einzelne Bytes eines Befehls müssen innerhalb von 7 ms aufeinander folgen. Weitere Befehle
können nahtlos, d.h. ohne einen zeitlichen Abstand, gesendet werden, sofern sie dem
vorherigen letzten Befehlsbyte schneller als 7 ms folgen. Ansonsten darf der nächste Befehl
erst 9 ms nach dem letzten gesendeten Byte beginnen.

Zur Synchronisation hat der Host spätestens nach 20 Befehlen eine mindestens 9 ms lange
Taktlücke einzufügen. Beim Auslesen einer CV-Bank mittels SUSI-BiDi-Befehlen dürfen bis
zu 50 Befehle ohne Pause übertragen werden.

Befehle, die eine Antwort erwarten, müssen bei positiver Beantwortung vom SUSI-Modul mit
einem Acknowledge ("ACK") bestätigt werden, indem dieses die Datenleitung über die 470 Ω
gegen Masse zieht. Das Acknowledge muss mindestens 1 ms und maximal 2 ms lang sein und
muss spätestens 20 ms nach der fallenden Taktflanke des letzten Bits beendet sein. Nach
20 ms ohne abgeschlossenes Acknowledge darf der Host das Kommando mit negativer
Antwort abbrechen. Ein Host hat Acknowledge-Pulse von 0,5 bis 7 ms als gültig zu


akzeptieren. Kürzere Pulse sollten zur Unterdrückung von Störungen als ungültig betrachtet
werden.

Beim Zugriff auf die CVs 897 bis 899 sowie 1020 bis 1024 können mehrere SUSI-Module
mit einem Acknowledge antworten. Daher muss in diesem Fall der Host immer die vollen
20 ms warten und darf nicht nach einem erfolgreich empfangenen Acknowledge sofort das
nächste Byte senden.

Auf eine Fehlererkennung oder -korrektur wird verzichtet, da die Leitungen im Allgemeinen
sehr kurz sind. Es wird empfohlen diese mit maximal 20 cm Länge zwischen Host und SUSI-
Modul auszuführen.

Wenn SUSI-Module innerhalb von 100 ms nach Reset keine gültigen Befehle erhalten,
können sie automatisch in einem alternativen Modus ohne SUSI-Befehlssteuerung starten.

## 5 Befehle

Die Datenbytes sind im Grundsatz von den DCC-Befehlen der [RCN- 212 ] und [RCN- 214 ]
abgeleitet. Dies ermöglicht eine sehr einfache Weiterleitung von DCC-Befehlen an SUSI-
Module. In der [RCN- 212 ] und [RCN- 214 ] finden sich detailliertere Beschreibungen der
einzelnen Bits in den Befehlen. Befehle werden bei Bedarf z.B. bei aktuell empfangenen
Daten im Host an die SUSI-Module gesendet. Spätestens alle 200 ms sollte auch ohne neuen
Datenempfang jeder aktive Funktions- oder Fahrbefehl wiederholt werden, um auch bei
Störungen einen sicheren Betrieb zu ermöglichen. Wenn im Host kein externer Datenempfang
vorhanden ist, kann er auch eigenständig Befehle aufgrund von vorgegebenen
Betriebszuständen generieren (z.B. im Analogbetrieb).

Funktionsgruppe 1 (2-Byte):

### 0110 - 0000 (0x60 = 96) 0 0 0 F0 - F4 F3 F2 F

Anmerkung: Bei SUSI wird die Lichtfunktion F0 immer in FG1 gesendet.

Funktionsgruppe 2 (2-Byte):

### 0110 - 0001 (0x61 = 97) F12 F11 F10 F9 - F8 F7 F6 F

Anmerkung: Bei SUSI sind die DCC-Funktionsgruppen F5 – F8 und F9 – F12 in einem
Befehl zusammengefasst.

Funktionsgruppe 3 (2-Byte):

### 0110 - 0010 (0x62 = 98) F20 F19 F18 F17 - F16 F15 F14 F

Funktionsgruppe 4 (2-Byte):

### 0110 - 0011 (0x63 = 99) F28 F27 F26 F25 - F24 F23 F22 F

Funktionsgruppe 5 (2-Byte):

### 0110 - 0100 (0x64 = 100) F36 F35 F34 F33 – F32 F31 F30 F

Funktionsgruppe 6 (2-Byte):

### 0110 - 0101 (0x65 = 101) F44 F43 F42 F41 – F40 F39 F38 F


Funktionsgruppe 7 (2-Byte):

### 0110 - 0110 (0x66 = 102) F52 F51 F50 F49 - F48 F47 F46 F

Funktionsgruppe 8 (2-Byte):

### 0110 - 0111 (0x67 = 103) F60 F59 F58 F5 7 – F56 F55 F54 F

Funktionsgruppe 9 (2-Byte):

### 0110 - 1000 (0x6 8 = 104 ) F 68 F 6 7 F 6 6 F 65 – F 6 4 F 6 3 F 6 2 F 61

Binärzustände kurze Form (2-Byte):

### 0110 - 1101 (0x6D = 109) D L6 L5 L4 - L3 L2 L1 L

### Anmerkung: D = 0 bedeutet Funktion L ausgeschaltet, D = 1 eingeschaltet

```
L = Funktionsnummer 1 ... 127
```
### L = 0 (Broadcast) schaltet alle Funktionen 1 bis 127 aus ( D = 0 ) oder an

### ( D = 1 )

Binärzustände lange Form low Byte (2-Byte):

### 0110 - 1110 (0x6E = 110) D L6 L5 L4 - L3 L2 L1 L

Anmerkung: Befehl wird immer paarweise vor dem Binärzustand lange Form high Byte
gesendet. Folgen die beiden Befehle nicht direkt aufeinander, so sind sie
zu ignorieren.

### D = 0 bedeutet Binärzustand L ausgeschaltet, D = 1 "eingeschaltet"

```
L = niederwertige Bits der Binärzustandsnummer 1 ... 32767
```
Binärzustände lange Form high Byte (2-Byte):

### 0110 - 1111 (0x6F = 111) H7 H6 H5 H4 - H3 H2 H1 H

Anmerkung: Befehl wird immer paarweise nach dem Binärzustand lange Form low
Byte gesendet. Folgen die beiden Befehle nicht direkt aufeinander, so sind
sie zu ignorieren.
Erst dieser Befehl führt zur Ausführung des Gesamtbefehls.
H = höherwertigen Bits der Binärzustandsnummer high 1 ... 32767
Anmerkung: H und L = 0 (Broadcast) schaltet alle 32767 verfügbaren Binärzustände

### aus ( D = 0 ) oder an ( D = 1 )

Direktbefehl 1 (2-Byte):

### 0100 - 0000 (0x40 = 64) X 8 X 7 X 6 X 5 - X 4 X 3 X 2 X 1

Anmerkung: Die Direktbefehle dienen zur direkten Ansteuerung von Ausgängen und
anderen Funktionen nach der Anwendung der Funktionstabelle im Host.

### Ein Bit = 1 bedeutet der entsprechende Ausgang ist eingeschaltet.

Direktbefehl 2 (2-Byte):

### 0100 - 0001 (0x41 = 65) X 16 X 15 X 14 X 13 – X 12 X 11 X 10 X 9


Direktbefehl 3 (2-Byte):

### 0100 - 0010 (0x42 = 66) X 24 X 23 X 22 X 21 – X 20 X 19 X 18 X 17

Direktbefehl 4 (2-Byte):

### 0100 - 0011 (0x 43 = 67 ) X 32 X 31 X 30 X 29 – X 28 X 27 X 26 X 25

Trigger-Puls (2-Byte):

### 0010 - 0001 (0x21 = 33) 0 0 0 0 - 0 0 0 1

Anmerkung: Der Befehl dient zur Synchronisation eines Dampfstoßes. Er wird je
Dampfstoß einmal gesendet. Die Bits 1 bis 7 sind für zukünftige
Anwendungen reserviert.

Strom (2-Byte):

### 0010 - 0011 (0x23 = 35) S7 S6 S5 S 4 - S3 S2 S1 S 0

Anmerkung: Vom Motor verbrauchter Strom. Der Wert hat einen Bereich von -128 bis
127, wird im 2er-Komplement übertragen und wird über eine
herstellerspezifische CV im Lokdecoder kalibriert. Negative Werte
bedeuten ein Rückspeisen, wie es bei modernen E-Loks möglich ist.

"Ist" Lok-Fahrstufe (2-Byte):

### 0010 - 0100 (0x24 = 36) R G6 G5 G4 - G3 G2 G1 G

Anmerkung: Die Fahrstufe und Richtung entsprechen dem realen Zustand am Motor.
Der Wert G ist als 0...127 auf die im Modell eingestellte Vmax normiert zu
übertragen. G = 0 bedeutet Lok steht, G = 1 ... 127 ist die normierte

### Geschwindigkeit, R = Fahrtrichtung mit R = 0 für rückwärts und R = 1

```
für vorwärts.
Dieser und der folgende Befehl werden nicht für neue Implementierungen
empfohlen. SUSI-Module sollten nach Möglichkeit die Befehle 0x50 bis
0x52 auswerten. Hosts, die aus Gründen der Kompatibilität zu
existierenden Produkten abweichende und/oder unterschiedliche
Umsetzungen bei den Befehlen 0x24 und 0x25 verwenden, sind
normkonform.
```
"Soll" Lok-Fahrstufe (2-Byte):

### 0010 - 0101 (0x25 = 37) R G6 G5 G4 - G3 G2 G1 G

Anmerkung: Empfangene Fahrstufe des Hosts auf 127 Fahrstufen normiert.
G = 0 bedeutet Lok hält, G = 1 ... 127 ist die normierte Geschwindigkeit,

### R = Fahrtrichtung mit R = 0 für rückwärts und R = 1 für vorwärts

Lastausregelung (2-Byte):

### 0010 - 0110 (0x26 = 38) P7 P6 P5 P4 - P3 P2 P1 P

Anmerkung: Die Erfassung des Lastzustandes kann über Motorspannung, -strom oder -
leistung erfolgen. 0 = keine Last, 127 = maximale Last. Es sind auch
negative Werte möglich, die im 2er-Komplement übertragen werden.
Diese bedeuten weniger Last als Fahren in der Ebene.


"Ist" Geschwindigkeit (2-Byte):

### 0101 - 0000 (0x50 = 80) R G6 G5 G4 - G3 G2 G1 G

Anmerkung: Die Geschwindigkeit und Richtung entsprechen dem realen Zustand am
Motor. Dieses ist ein Regelwert in Bezug auf die "Soll"- Geschwindigkeit,
d.h. dass nach Nachführung der Geschwindigkeitsrampe Ist und Soll gleich
sein sollen (ausgeregelter Zustand). Der Wert G ist als 0...127 auf die im
Modell eingestellte Vmax normiert zu übertragen. G = 0 bedeutet Lok steht, G

### = 1 ... 127 ist die normierte Geschwindigkeit, R = Fahrtrichtung mit R = 0

### für rückwärts und R = 1 für vorwärts

"Soll" Geschwindigkeit (2-Byte):

### 0101 - 0001 (0x51 = 81) R G6 G5 G4 - G3 G2 G1 G

Anmerkung: Interne Fahrstufe des Hosts entsprechend der über die Kennlinie (CVs 67
bis 94, CVs 2, 6 und 5) und sonstiger CVs, die die Geschwindigkeit des
Fahrzeugs bestimmen, umgerechnete empfangene Fahrstufe auf 127
Fahrstufen normalisiert. D.h. der höchste aufgrund der CVs 94 und/oder
CV5 bzw. sonstiger entsprechender CVs erreichbare Wert wird auf 127
normiert. CVs für Beschleunigung und Bremsen, wie die CVs 3, 4, 23 und
24 , gehen in die Berechnung nicht ein. G = 0 bedeutet Lok hält, G = 1 ...
127 ist die Geschwindigkeit R = Fahrtrichtung mit R = 0 für rückwärts und
R = 1 für vorwärts.
Da die Decoder unterschiedliche Verfahren zur Bestimmung der
Höchstgeschwindigkeit verwenden, kann es hier leicht unterschiedliche
Implementationen geben. Wichtig ist vor allem, dass sich die Befehle für
Ist und Soll-Geschwindigkeit gleich verhalten.

DCC-Fahrstufe (2-Byte):

### 0101 - 0010 (0x52 = 82) R G6 G5 G4 - G3 G2 G1 G

Anmerkung: Dieser Wert ist nur ggf. von 14 oder 28 Fahrstufen auf 127 Fahrstufen

```
normiert. Es findet keine Anpassung durch irgendwelches CVs statt.
```
Analogfunktionsgruppe (2-Byte):

### 0010 - 1xxx (0x28 = 40 bis 0x2F = 47) A7 A 6 A 5 A 4 - A 3 A 2 A 1 A 0

Anmerkung: Die acht Befehle dieser Gruppe erlauben die Übertragung von acht
verschiedenen Analogwerten im Digitalbetrieb.

Direktbefehl 1 für Analogbetrieb (2-Byte):

### 0011 - 0000 (0x30 = 48) D7 D6 D5 D4 - D3 D2 D1 D

Anmerkung: Einstellung von Grundfunktionen im Analogbetrieb unter Umgehung einer
Funktionszuordnung.
 Bit 0: Sound an/aus
 Bit 1: Auf-/Abrüsten
 Bit 2-6: reserviert
 Bit 7: Reduzierte Lautstärke


Direktbefehl 2 für Analogbetrieb (2-Byte):

### 0011 - 0000 (0x31 = 49) D7 D6 D5 D4 - D3 D2 D1 D

Anmerkung: Einstellung von Grundfunktionen im Analogbetrieb unter Umgehung einer
Funktionszuordnung.
 Bit 0: Spitzensignal
 Bit 1: Schlusssignal
 Bit 2: Standlicht
 Bit 3-7: reserviert

No Operation (2-Byte):

### 0000 - 0000 (0x00 = 0) X X X X - X X X X

Anmerkung: Der Befehl bewirkt keine Aktion im SUSI-Modul. Die Daten können einen
beliebigen Wert haben. Der Befehl kann als Lückenfüller oder zu
Testzwecken verwendet werden.

Hostadresse low (2-Byte):

### 0101 - 1110 (0x5E = 94) A7 A6 A5 A4 - A3 A2 A1 A

Anmerkung: Übermittelt die niederwertigen Bits der aktiven Digitaladresse des Hosts,
wenn er sich in einer digitalen Betriebsart befindet.
Der Befehl wird immer paarweise vor der Adresse high Byte gesendet.
Folgen die beiden Befehle nicht direkt aufeinander, so sind sie zu
ignorieren.

Hostadresse high (2-Byte):

### 0101 - 1111 (0x5F = 95) A15 A14 A13 A12 - A11 A10 A9 A

Anmerkung: Übermittelt die höherwertigen Bits der aktiven Digitaladresse des Hosts,
wenn er sich in einer digitalen Betriebsart befindet.
Der Befehl wird immer paarweise nach der Adresse low Byte gesendet.
Folgen die beiden Befehle nicht direkt aufeinander, so sind sie zu
ignorieren.

Modul-Steuerbyte (2-Byte):

### 0110 - 1100 (0x6C = 108) B7 B6 B5 B4 - B3 B2 B1 B

### Anmerkung: Bit 0 = Buffer Control: 0 = Puffer aus, 1 = Puffer an

### Bit 1 = Rücksetzfunktion: 0 = alle Funktionen auf "Aus" setzen,

### 1 = normaler Betrieb

```
Alle weiteren Bits von der RailCommunity reserviert.
Falls implementiert sind nach einem Reset die Bits 0 und 1 im SUSI-
Modul auf 1 zu setzen.
```

CV-Manipulation Byte prüfen (3-Byte):

### 0111 - 0111 (0x77 = 119) 1 V6 V5 V4 - V3 V2 V1 V

### D7 D6 D5 D4 - D3 D2 D1 D

Anmerkung: DCC-Befehl Byte Prüfen im Service- und Betriebsmodus
V = CV-Nummer 897 .. 1024 (Wert 0 = CV 897, Wert 127 = CV 1024)
D = Vergleichswert zum Prüfen. Wenn D dem gespeicherten CV-Wert
entspricht, antwortet das SUSI-Modul mit einem Acknowledge.
Anmerkung Dieser und die beiden folgenden Befehle sind die in Abschnitt 4 genannten
3 Byte Pakete entsprechend [RCN- 214 ]

CV-Manipulation Bit manipulieren (3-Byte):

### 0111 - 1011 (0x7B = 123) 1 V6 V5 V4 - V3 V2 V1 V

### 1 1 1 K - D B2 B1 B

Anmerkung: DCC-Befehl Bit Manipulieren im Service- und Betriebsmodus
V = CV-Nummer 897 ... 1024 (Wert 0 = CV 897, Wert 127 = CV 1024)

### K = 0 : Bit Prüfen. Wenn D mit dem Bitzustand an der Bitstelle B der CV

```
übereinstimmt, wird mit einem Acknowledge geantwortet.
```
### K = 1 : Bit Schreiben. D wird in Bitstelle B der CV geschrieben.

```
Das SUSI-Modul bestätigt das Schreiben mit einem Acknowledge.
```
CV-Manipulation Byte schreiben (3-Byte):

### 0111 - 1111 (0x7F = 127) 1 V6 V5 V4 - V3 V2 V1 V

### D7 D6 D5 D4 - D3 D2 D1 D

Anmerkung: DCC-Befehl Byte Schreiben im Service- und Betriebsmodus
V = CV-Nummer 897 .. 1024 (Wert 0 = CV 897, Wert 127 = CV 1024)
D = Wert zum Schreiben in die CV. Das SUSI-Modul bestätigt das
Schreiben mit einem Acknowledge.

Die Befehle 0x01 bis 0x0F, 0x80 bis 0x8F und 0xE0 bis 0xFF sind in der [RCN- 601 ]
definiert und für BiDi reserviert.


## Anhang A: Verweise auf andere Normen

### A.1 Normative Verweise

Bei der Verwendung der entsprechenden Schnittstelle müssen folgernde Normen eingehalten
werden:

[RCN-118] RCN- 118 Next18 / Next18S – Schnittstelle für kleine Fahrzeuge

[RCN-121] RCN- 121 21MTC – 21 - polige Schnittstelle

[RCN-122] RCN- 122 PluX – 22 und 16-polige Schnittstelle

[RCN-602] RCN- 602 Konfigurationsvariablen für SUSI

### A.2 Informative Verweise

Die hier aufgeführten Normen und Dokumente haben rein informativen Charakter und sind
nicht Bestandteil dieser Norm.

[RCN-212] RCN- 212 DCC Betriebsbefehle für Fahrzeugdecoder

[RCN-214] RCN- 214 DCC Konfigurationsbefehle

[RCN-226] RCN- 226 DCC Spezialwerte zur Konfiguration

[RCN-601] RCN- 601 SUSI-Bidirektional

[S- 9. 2. 2 Anhang A] NMRA: S-9.2.2 Appendix A Manufacturer ID codes


## Anhang B: Historie

```
Datum Kapitel Änderungen gegenüber der jeweils
vorhergehenden Version
```
#### SUSI-

```
Version
```
21 .07.2024 Alle

```
Master durch Host ersetzt
Slave bzw. Slave Modul durch SUSI-Modul ersetzt
Befehle 0x5E & 0x5F jetzt Hostadresse
```
#### 1.

#### 26.11.2023 4

```
Maximalzeit für 1 Bit 100 μs und maximal 50
Befehle beim Auslesen einer CV-Bank
```
#### 1. 5

#### 23.07.

#### 6

#### 2 & 3.

```
Definition der CVs ausgelagert in [RCN- 602 ]
Neu: 21MTC als SUSI-Schnittstelle
```
#### 1. 3

27.11.2022 6 „STOP“ Bit in Statusbyte CV 1020 ergänzt. 1.

#### 12.12.

#### 4 & C

#### D.

```
Genauere Spezifikation der 0x7# Befehle
insbesondere dass alle 3-Byte-Befehle sind.
Formulierung zu alten Normen geändert.
```
#### 1.

#### 06.12.

#### 5 & C

#### 6

```
Neue Befehle für "Ist" und "Soll" Geschwindigkeit
sowie die DCC-Fahrstufe (Befehle 0x50 bis 0x52)
Befehl Regelabweichung 0x22 entfernt.
Befehle 0x40 bis 0x43 für direkte Steuerung der
Ausgänge.
Vorzeichen für die Lastausregelung (Befehl 0x26)
CV 1020 Bit 1 "SLOW" ergänzt
```
#### 1. 3

#### 02.12.

#### 1.

#### 2 & 2.

#### 2 & 2.

#### & 3.

#### 3.

#### 3.

#### 5 & C

#### D.

#### E

```
Ergänzung Widerstandstoleranz
5V-SUSI jetzt classicSUSI
Ergänzung powerSUSI
```
```
Neu: Next18 und PluX22 als SUSI-Schnittstelle
Neu: Festlegungen zu den Logikpegeln
Neue Befehle für F29 bis F68 (0x6 4 - 0x68) sowie
0x21 Trigger-Puls, 0x22 Regelabweichung und 0x
Strom, Analogfunktionsgruppe (0x28-0x2f) und
Direktbefehle für Analogbetrieb (0x30 & 0x31)
Ergänzung Anhang D.
Neue Schaltung Anhang E
```
#### 1.

```
(CV-Wert 12)
```
#### 28 .0 8.

#### 2 & 2.

#### & 3.

```
Ergänzung microSUSI (keine Änderungen am
Protokoll)
```
#### 1.

```
(CV-Wert 11)
```
31.07.

#### C

#### E

```
Befehle für SUSI Bidirektional reserviert
Neu: Anhang E Schaltung zur Pegelanpassung
```
#### 1.

```
(CV-Wert 11)
```
27.07.2015 Alle Erste Version 1.


## Anhang C: Befehlsübersicht

Hex-Code Befehl Bemerkung

0x00 NOP / Leerbefehl

0x01 – 0x0F BiDi-Host-Rufe

```
Siehe [RCN- 601 ]
(ab SUSI-Version 1.1.)
```
0x10 – 0x20 reserviert

0x21 Trigger-Puls (ab SUSI-Version 1.2)

0x22 reserviert

0x23 Strom (ab SUSI-Version 1.2)

0x24 "Ist" Lok-Fahrstufe

0x25 "Soll" Lok-Fahrstufe

0x26 Lastausregelung

0x27 reserviert

0x28 – 0x2F Analogfunktionsgruppe (ab SUSI-Version 1.2)

0x30 Direktbefehl 1 für Analogbetrieb (ab SUSI-Version 1.2)

0x31 Direktbefehl 2 für Analogbetrieb (ab SUSI-Version 1.2)

0x 40 Direktbefehl 1 für Ausgänge 1 bis 8 (ab SUSI-Version 1.3)

0x

```
Direktbefehl 2 für Ausgänge 9 bis
16
```
```
(ab SUSI-Version 1.3)
```
0x

```
Direktbefehl 3 für Ausgänge 17 bis
24
```
```
(ab SUSI-Version 1.3)
```
0x

```
Direktbefehl 4 für Ausgänge 25 bis
32
```
```
(ab SUSI-Version 1.3)
```
0x44 – 0x4F reserviert

0x50 "Ist" Geschwindigkeit (ab SUSI-Version 1.3)

0x51 "Soll" Geschwindigkeit (ab SUSI-Version 1.3)

0x52 DCC- Fahrstufe (ab SUSI-Version 1.3)

0x 53 – 0x5D reserviert

0x5E / 0x5F Hostadresse (ab RCN-600)

0x60 Funktionsgruppe 1

0x61 Funktionsgruppe 2


0x62 Funktionsgruppe 3

0x63 Funktionsgruppe 4

0x64 Funktionsgruppe 5 (ab SUSI-Version 1.2)

0x65 Funktionsgruppe 6 (ab SUSI-Version 1.2)

0x66 Funktionsgruppe 7 (ab SUSI-Version 1.2)

0x67 Funktionsgruppe 8 (ab SUSI-Version 1.2)

0x68 Funktionsgruppe 9 (ab SUSI-Version 1.2)

0x69 – 0x6B reserviert

0x6C Modul-Steuerbyte (ab RCN-600)

0x6D Binärzustand kurze Form

0x6E / 0x6F Binärzustand lange Form

0x70 – 0x72 Gesperrter Bereich Siehe Anhang D.5 (CVs < 896)^
3 - Byte-Befehle

0x73 reserviert
Ggf. Service Mode Erweiterung
(CC=00) – 3 - Byte-Befehl

0x74 – 0x76 Gesperrter Bereich Siehe Anhang D.5 (CVs < 896)^
3 - Byte-Befehle

0x77 CV-Manipulation Byte prüfen 3 - Byte-Befehl

0x78 – 0x7A Gesperrter Bereich Siehe Anhang D.5 (CVs < 896)^
3 - Byte-Befehle

0x7B CV-Manipulation Bit manipulieren (^3) - Byte-Befehl
0x7C CV-Manipulation Bit manipulieren Nur CV8 für Resetfunktion (Anh. D.5)^
3 - Byte-Befehl
0x7D / 0x7E Gesperrter Bereich Siehe Anhang D.5 (CVs < 896)^
3 - Byte-Befehle
0x7F CV-Manipulation Byte schreiben 3 - Byte-Befehl
0x80 – Ox8F BiDi-SUSI-Modul-Antworten Siehe [RCN- 601 ]
0x90 – 0x9F Reserviert Noch keine konkrete Verwendung
0xA0 – 0xAF
Reserviert für Update
und Soundprogrammierung
Herstellerspezifisch nutzbar; Im
Modellbetrieb nicht erlaubt
0xB0 – 0xDF reserviert
0xE0 – 0xFF BiDi-Befehle Noch in der Entwicklungsphase
Tabelle 2: Befehlsübersicht


## Anhang D: Erkannte Probleme mit Inkompatibilitäten zur Norm

### D.1 Datensenderate

Es gibt SUSI-Module, welche keine schnell auf einander folgenden Datenpakete verarbeiten
können. Es zeigte sich, dass teilweise Pausen von mehreren 10 ms zwischen Paketen nötig
sind. Zum Ansteuern dieser SUSI-Module darf der Host auf einen Langsam-Modus
umgeschaltet werden, welcher entgegen der Norm in festen Zeitfenstern die Daten aussendet.

### D.2 Datensignal im Ruhepegel

Gemäß Norm ist der Pegel nach der Datenübertragung nicht festgelegt und es darf auf der
Datenleitung der letzte Signalzustand erhalten bleiben. Es gibt aber SUSI-Module, die im
Ruhezustand immer einen High-Pegel benötigen. Ein Host, der sich entsprechend verhält, ist
normkonform.

### D.3 Synchronisierung der Datenübertragung

Bei früheren Normversionen von DIETZ und NMRA gab es keine bzw. andere Zeitgrenzen
zum automatischen Rücksetzten der SUSI-Module, so dass es bei einem Mischbetrieb
zwischen älteren und konformen Modulen zu Datenverlusten kommen kann.

### D.4 Acknowledge-Dauer

Es gibt Hosts, die nicht sofort nach Datenende auf ein Acknowledge reagieren sondern bis zu
0,5 ms verzögert reagieren. Wenn ein SUSI-Modul sofort nach Datenende einen nur 1 ms
langen Impuls ausgibt, so wird dieser eventuell als nicht positiv erkannt. SUSI-Module,
welche das Acknowledge sofort nach Datenempfang ausgeben, sollten dann Pulse mit einer
Mindestlänge von 1,5 ms ausgeben.

### D.5 Zugriffe auf CVs unter

Die SUSI-Normen vor der RCN-600 haben nicht explizit ausgeschlossen, dass alle Zugriffe
auf CVs vom Host zu den SUSI-Modulen durchgereicht werden, d.h. in den Befehlen 0x7#
sind die Bits 1 und 0 im ersten Befehlsbyte sowie das Bit 7 im zweiten Befehlsbyte die
höherwertigen Bits der CV-Adresse. Es wurde aber im Text darauf hingewiesen, dass nur der
Wertebereich 896 bis 1023 für die CVs 897 bis 1024 gültig ist. Damit sind die drei genannten
Bits immer auf 1 wie in der RCN-600 beschrieben.

Es wurde aber teilweise das Rücksetzen des Decoders durch Schreiben von CV8, wie in
[RCN- 226 ] in Abschnitt 2 beschrieben, zum SUSI-Modul weitergereicht und dort zum
Rücksetzen des Moduls verwendet. Dieses ist der einzige Zugriff auf ein CV im Bereich
unterhalb von CV 897, der von dieser Norm toleriert wird. Der entsprechende Befehl lautet

### 0x7C, 0x07, 0x08. = 0111 - 11 00 0000-0111 0000- 1000.


### D.6 Bekannte Protokoll-Inkompatibilitäten

Einigen SUSI-Module reagieren auf nicht in dieser Norm definierte Befehle bzw. nutzen
reservierte Bits in definierten Befehlen:

```
 Befehl 0x16 löscht bei einigen Modulen den Sound-Speicher
 Befehl 0x27 wird teilweise verwendet für unbekannte Anwendung im Analogbetrieb
 Im Befehl 0x60 werden die drei oberen Datenbits (Bits 7 bis 5 ) abweichend von dieser
Norm verwendet.
```
## Anhang E: Schaltungsbeispiel für Decoder mit Vcc = 3,3 V

Für Hosts mit Vcc = 3,3 V oder niedriger ist (ausgenommen bei microSUSI) eine Schaltung
zur Anpassung erforderlich, sofern die Kompatibilität zu SUSI-Modulen gewünscht ist, die
5V-Pegel benötigen. Die Abbildung zeigt eine mögliche Schaltung. Die grau gefüllten
Bauteile sind die immer erforderlichen Bauteile der Standardschaltung.

Da praktisch alle Controller Schutzdioden an den I/O-Anschlüssen haben, reicht es in meisten
Fällen nicht, den Ausgang nur auf Open-Kollektor zu programmieren oder zwischen 0-Pegel
und hochohmig umzuschalten. Die Schutzdiode würde den Anstieg der Spannung auf über ca.
3,8 verhindern.

Copyright 2024 RailCommunity – Verband der Hersteller Digitaler Modellbahnprodukte e.V.


