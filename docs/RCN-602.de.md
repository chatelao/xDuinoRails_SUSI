```
Norm
```
# RCN- 602

## SUSI-Bus

```
Konfigurationsvariablen
```
```
Ausgabe
21. 07. 2024
```
```
RailCommunity – Verband
der Hersteller Digitaler
Modellbahnprodukte e.V.
```
## Inhalt

```
1 Allgemeines .......................................................................................................................... 1
1.1 Zweck der Norm ........................................................................................................... 1
```
```
1.2 Anforderungen .............................................................................................................. 1
```
```
2 Konfigurationsvariablen (CVs) ............................................................................................. 2
```
```
3 Bänke mit Konfigurationsdaten für RCN- 218 ...................................................................... 5
```
```
Anhang A: Verweise auf andere Normen ................................................................................ 6
```
```
A.1 Normative Verweise .................................................................................................... 6
```
```
A.2 Informative Verweise ................................................................................................... 6
```
```
Anhang B: Historie .................................................................................................................. 6
```
## 1 Allgemeines

### 1.1 Zweck der Norm

Diese Norm beschreibt die Konfigurationsvariablen für in [RCN- 600 ] definierte Schnittstelle
zwischen einem Hauptmodul, im Weiteren als Host bezeichnet, und Erweiterungs-Modulen,
im Weiteren als SUSI-Module bezeichnet, teilweise einfach als "Modul“ bezeichnet, in einem
Modell. Dies können Soundbausteine, erweiterte Funktionsausgänge oder sonstige
Funktionsmodule sein. Der Name SUSI ist die Abkürzung von: "Serial User Standard
Interface".

### 1.2 Anforderungen

Um diese Norm zu erfüllen dürfen alle genannten Konfigurationsvariablen, kurz CVs, nur in
der genannten Art und Weise verwendet werden.


## 2 Konfigurationsvariablen (CVs)

Die für SUSI reservierten CVs liegen im Bereich von 897 bis 1024 (siehe [RCN- 225 ]).

Die maximal drei an SUSI anschließbaren SUSI-Module müssen vor Einbau jeweils einem
für das jeweilige Modul gültigen CV Bereich zugeordnet werden. Diese Bereiche liegen bei
CV 900 bis 939 für SUSI-Modul 1, CV 940 bis 979 für SUSI-Modul 2 und CV 980 bis 1 019
für SUSI-Modul 3.

Die CVs 897 bis 899 sowie 1020 bis 1024 sind für alle Module unabhängig von deren Modul-
Nummer gültig. Ein Auslesen dieser CVs ist nur mit einem einzeln angeschlossenen Modul
sinnvoll und sollte im normalen Betrieb unterbleiben sobald mehrere Module angeschlossen
sind.

```
CV-Name
```
#### CV#

```
Modul 1
```
#### CV#

```
Modul 2
```
#### CV#

```
Modul 3
Kommentar
```
SUSI-Modul # 897 Bedeutung festgelegt

SUSI CV-Banking 898 flüchtig, veraltete Variante

Herstellerspezifisch 899 wurde bereits verwendet

Herstellerkennung 900.0 940.0 980.0 nur in Bank 0; festgelegt

Hardwarekennung 900.1 940.1 980.1 nur in Bank 1; festgelegt

Herstellerkennung 2
oder Alternative
Herstellerkennung

#### 900.254 940.254 980.

```
nur in Bank 254; reserviert für
alternative Herstellerkennung
oder erweiterte NMRA
Herstellerkennung
```
Versionsnummer 901.0 941.0 981.0 nur in Bank 0; festgelegt

Unterversionsnummer 901.1 941.1 981.1 nur in Bank 1; festgelegt

SUSI-Version 901.254 941.254 981.
nur in Bank 254;
unterstützte SUSI-Version

Herstellerspezifisch 902 - 939 942 - 979 982 - 1019

Statusbits 1020

```
Bit 0- 3 = WAIT, SLOW
HOLD & STOP
Bits 4 - 7 reserviert.
```
SUSI CV-Banking 1021
nicht-flüchtig,
empfohlene Variante

reserviert 1022

reserviert 1023

reserviert 1024

Tabelle 1: Liste der CVs


Die mit „festgelegt“ markierten CVs müssen – sofern implementiert – die genannten
Funktionen erfüllen. Die reservierten CVs und Bits dürfen nicht genutzt werden und müssen
eine 0 enthalten.

CV 897 SUSI-Modul #

Die Zuordnung der 40 SUSI-Modul-spezifischen CVs wird in CV 897 Bit 0 und 1 festgelegt.

### Für SUSI-Modul 1 wird der Wert 1 ( 01 b), für SUSI-Modul 2 der Wert 2 ( 10 b) und für

### SUSI-Modul 3 der Wert 3 ( 11 b) in diese CV geschrieben. Ein Umprogrammieren der

CV 8 97 ist nur mit einem einzeln angeschlossenen Modul sinnvoll und sollte im normalen
Betrieb unterbleiben, sobald mehrere Module angeschlossen sind.

Die Bits 2 bis 7 in CV 897 sind reserviert. Sollten beide Bits 0 und 1 auf null gesetzt sein,
sollte das SUSI-Modul das als 1 werten.

Alternativ ist es zulässig den Bereich herstellerseitig festzulegen oder die Auswahl per
Hardware, z.B. mittels mechanischem Schalter oder Jumper, vorzunehmen.

CV 898 SUSI CV-Banking (flüchtig, veraltete Variante)

Mit dem CV 898 "SUSI CV-Banking" kann die Zahl der CVs pro Modul erweitert werden.
Damit können in einem Modul innerhalb der 40 Modul-spezifischen CVs 256 * 40 = 10240
CV realisiert werden. Es werden nur die Modul-spezifischen CVs in Bereich 900 bis 1019 per
Banking umgeschaltet. Die CV 898 kann im Betrieb geschrieben werden.

Da die CV 898 von allen SUSI-Modulen gemeinsam genutzt wird, ist ein Auslesen nicht
sinnvoll, wenn mehr als ein SUSI-Modul angeschlossen ist. Es wird empfohlen am Ende aller
CV-Manipulationen außerhalb Bank 0 die CV 898 wieder auf 0 zurückzusetzen. CV 898 ist
flüchtig und setzt sich nach jedem Programmierbefehl zur CV-Manipulation mit 3 Byte auf 0
zurück.

Soll also eine CV außerhalb Bank 0 manipuliert werden, muss vor _jedem_ Programmier-
befehl ein Befehl "CV-Manipulation Byte schreiben (0x7F)" an CV 898 mit der Banknummer
vorangestellt werden. Beim bitweisen Auslesen des CV-Wertes ist entsprechend mehrfach
dieser Schreibbefehl zu senden.

Diese CV wird nicht für neue Implementierungen empfohlen. Hosts, die aus Gründen der
Kompatibilität zu existierenden Produkten CV 898 verwenden, sind normkonform. Für neue
Implementierungen wird empfohlen CV 1021 zu nutzen.

CV 899 Herstellerspezifisch (veraltet)

Da die CV 899 von allen SUSI-Modulen gemeinsam genutzt wird, ist ein Auslesen nicht
sinnvoll, wenn mehr als ein SUSI-Modul angeschlossen ist.

Diese CV wird nicht für neue Implementierungen empfohlen.

CV 900 / 940 / 980 Hersteller- und Hardwarekennung

In der Bank 0 (siehe CV 1021) steht die Herstellerkennung, wie von der NMRA vergeben und
in [S- 9. 2. 2 Anhang A] dokumentiert. Hat der Hersteller keine NMRA-Hersteller-ID, so ist
diese CV auf 13 zu setzen. Sollte eine alternative Herstellerkennung definiert und in der
entsprechenden CV abgelegt sein, so ist diese CV auf 0 zu setzen. CV 900.0 / 940.0 / 980.


kann nur gelesen werden. Ein Schreiben von CV 900.0 / 940.0 / 980.0 dient dem Rücksetzen
des Modus wie in [RCN- 226 ] in Abschnitt 2 für CV 8 eines Decoders beschrieben.

In der Bank 1 (siehe CV 1021) steht die herstellerabhängige Hardwarekennung. CV 900.1 /
940.1 / 980.1 darf nur dafür verwendet werden und kann nur gelesen werden. Sie wird vom
Hersteller frei definiert.

Die Bank 254 von CV 900 / 94 0 / 98 0 ist reserviert. Hier kann bei Bedarf entweder eine
Kennung für Hersteller, die keine NMRA Herstellerkennung haben, weil sie DCC nicht
unterstützen, festgelegt werden. Oder es werden die oben 4 Bit einer erweiterten 12 Bit
NMRA Herstellerkennung hier gespeichert. Ist der Wert dieser CV 0, so steht in Bank 0 die
NMRA Herstellerkennung. Ist der Wert dieser CV zwischen 1 und 15 einschließlich, stehen
in Bank 0 und 254 die 12 Bit der erweiterten NMRA Herstellerkennung. Ist der Wert 16 oder
größer, handelt es sich um eine alternative Herstellerkennung

CV 901 / 941 / 981 Versions- und Unterversionsnummer und SUSI-Versionskennung

Die Versionsnummer in Bank 0 und die Unterversionsnummer in Bank 1 (siehe CV 1021)
sind herstellerabhängig, aber die CVs 900.0 / 940.0 / 980.0 und 900.1 / 940.1 / 980.1 dürfen
nur dafür verwendet werden. Diese CVs können nur gelesen werden.

In der Bank 254 steht die unterstützte SUSI-Version. Der Wert wird als Dezimalwert mit
einer Nachkommastelle interpretiert, d.h. der Maximalwert 255 entspricht Version 25.5. Ein
Decoder, der diese Norm vom 27.07.2015 erfüllt, entspricht der Version 1.0 die als Wert 10
abgelegt wird.

CV 1020 Statusbyte

CV1020 ist ein Statusbyte und findet z.B. für eine WAIT-Funktion Anwendung. Diese CV
gilt für alle SUSI-Module und wird nicht über CV 1021 umgeschaltet.

Bit 0 "WAIT“ ist gesetzt, solange – z.B. bei einem Sound – der Decoder den Fahrmotor nicht
loslaufen lassen soll. Klassische Anwendung: Einen Dieselmotor akustisch hochdrehen
lassen, bevor tatsächlich losgefahren wird. Dazu prüft der Host das Bit 0 dieser CV auf 1.
Solange ein SUSI-Modul mit einem Acknowledge antwortet wird gewartet.

Bit 1 "SLOW" ist gesetzt, solange die Lok nur sehr langsam mit "Kriechgeschwindigkeit"
fahren darf. Klassische Anwendung: Ein Kran, eine Arbeitsbühne o.ä. befindet sich
momentan außerhalb der Umgrenzung des Fahrzeuges (z.B. NEM 301). In diesem Fall darf
das Fahrzeug langsam noch fahren, genau wie in der Realität. Wenn aber der Anwender die
Steuerung der Bühne ausschaltet (und damit auf die Steuerung des Fahrmotors umschaltet),
während sie noch nicht zu einem sicheren Fahrzustand gebracht ist, wird verhindert, dass das
Fahrzeug schnell losfährt und dadurch einen Unfall verursacht.

Bit 2 "HOLD" ist gesetzt, solange die Geschwindigkeit gehalten werden muss. Klassische
Anwendung: Es wird das Geräusch für den Schaltvorgang eines mechanischen Getriebes
abgespielt.

Bit 3 "STOP" wird zum Anhalten des Motors bzw. der Motoren im Fahrbetrieb gesetzt. Es hat
Priorität vor den Bits 0...2. Das SUSI-Modul kann den Antrieb in jedem Betriebszustand
stoppen. Mögliche Anwendungen sind Halteabschnitte bei Wendezügen mit Steuerwagen
voraus, PZB vor Signalen, bedingt ETCS und Steuerung mittels IR-Sendern im Gleisbett.


CV 1021 SUSI CV-Banking (nicht-flüchtig, empfohlene Variante)

Mit dem CV 1021 "SUSI CV-Banking" kann die Zahl der CVs pro Modul erweitert werden.
Damit können in einem Modul innerhalb der 40 Modul-spezifischen CVs 256 * 40 = 10240
CV realisiert werden. Es werden nur die Modul-spezifischen CVs in Bereich 900 bis 1019 per
Banking umgeschaltet. Die CV 1021 kann im Betrieb geschrieben werden.

Da die CV 1021 von allen SUSI-Modulen gemeinsam genutzt wird, ist ein Auslesen nicht
sinnvoll, wenn mehr als ein SUSI-Modul angeschlossen ist. Es wird empfohlen am Ende aller
CV-Manipulationen außerhalb Bank 0 die CV1021 wieder auf 0 zurückzusetzen. CV1021 ist
nicht flüchtig und setzt sich auch bei Stromunterbrechung nicht auf 0 zurück.

In den Bänken 0 und 1 haben die CVs 900 / 940 / 980 und 901 / 941 / 981 eine feste
Bedeutung. In den anderen CVs dieser Bänke können beliebige, herstellerabhängige Daten
abgelegt werden. Ab Bank 2 bis einschließlich Bank 247 können beliebige,
herstellerabhängige Daten abgelegt werden. Die Bänke 248 bis 254 sind von der
RailCommunity reserviert, die Bank 255 ist zur Kompatibilität mit existierenden Modulen
wieder frei verwendbar.

Um die per Banking erreichbaren CVs eindeutig zu referenzieren, wird die Banknummer mit
einem Punkt als Trennung an die CV-Nummer angehängt wie weiter oben bereits ausgeführt.

Die Bank 254 ist reserviert für genormte Anwendungen mit Werten die nur gelesen werden
können. Noch nicht definierte oder nicht implementierte Werte können nicht gelesen werden,
d.h. ein Lesebefehl bekommt nie ein Acknowledge. Damit kann man eine nicht unterstütze
CV eindeutig von jedem beliebigen Wert unterscheiden.

In dieser Bank ist bisher nur die oben beschriebene SUSI-Version definiert. Die CV für die
alternative Herstellerkennung ist zunächst nur reserviert.

Die Bänke 248 bis 253 sind für die Konfigurationsdaten reserviert

## 3 Bänke mit Konfigurationsdaten für RCN- 218

Für die automatische Anmeldung eines Decoders an der Zentrale entsprechend
[RCN- 218 ] benötigt der Decoder auch die Informationen der Funktionen, die in den
angeschlossenen SUSI-Modulen implementiert sind. Diese Daten werden in speziellen
Bänken abgelegt und werden per CV-Bank Lesen entsprechend [RCN- 601 ] Abschnitt 3.
vom Decoder abgeholt.

Bank 253 enthält die Funktionsauskunft, wie sie im Datenraum 2 des Decoders ab Byte 11
abgelegt ist. Um die Daten der SUSI-Module einfach mit denen des Decoders verknüpfen zu
können, wird im ersten Byte (CV 900/940/980) nur die Information für F0 in den Bits 6 und 7
abgelegt und dann im zweiten Byte die für die Funktionen F1 bis 8 usw. Für jede Funktion
sind zwei Bits reserviert:

### 00 = Funktion ist nicht vorhanden.

### 01 = Funktion ist vorhanden und schaltend benutzbar (z.B. Licht).

### 10 = Funktion ist vorhanden und tastend benutzbar.


Die Bänke 252 bis 248 enthalten eine statische Zuordnung von Funktions-Nummern zu
Funktions-Icons für die implementierten Funktionen, wie sie im Datenraum 4 des Decoders
ab Byte 2 abgelegt ist. Dabei wird jeweils ein Byte für die Funktionsnummer, gefolgt von ein
oder zwei Bytes für den Icon-Index, abgelegt. Der tatsächlich benötigte Platz ist abhängig
von der Anzahl der unterstützten Funktionen und ob die Icons-Indices ein oder zwei Bytes
benötigen. In den 5 reservierten Bänken können zwei Byte Icon-Indices von bis zu 66
Funktionen abgelegt werden. Die genaue Kodierungsregel ist in [TN- 218 ] festgelegt.

## Anhang A: Verweise auf andere Normen

### A.1 Normative Verweise

[RCN-218] RCN- 218 DCC-A – Automatische Anmeldung

[TN-218] TN- 218 DCC Bild- und Icon-Nummern für DCC-A

### A.2 Informative Verweise

Die hier aufgeführten Normen und Dokumente haben rein informativen Charakter und sind
nicht Bestandteil dieser Norm.

[RCN-225] RCN- 225 DCC Konfigurationsvariablen

[RCN-226] RCN- 226 DCC Spezialwerte zur Konfiguration

[RCN- 600 ] RCN- 600 SUSI-Bus Modul Erweiterungsschnittstelle

[RCN-601] RCN- 601 SUSI-Bidirektional

[S- 9. 2. 2 Anhang A] NMRA: S-9.2.2 Appendix A Manufacturer ID codes

## Anhang B: Historie

```
Datum Kapitel Änderungen gegenüber der jeweils
vorhergehenden Version
```
#### SUSI-

```
Version
```
#### 21 .07.

```
Alle
```
```
2
```
```
Master durch Host ersetzt
Slave bzw. Slave Modul durch SUSI-Modul ersetzt
CV 898 veraltete Version für Banking,
CV 899 herstellerspezifisch, da bereits verwendet
```
#### 1.

#### 26.11.

#### 2

#### 3

```
Bei CV 1021: Bänke ab 248 (statt 251) reserviert
Neu: Bänke mit Konfigurationsdaten für RCN- 218
```
#### 1. 5

#### 23 .0 7.

```
Alle
```
#### 2

```
Erste Version
(Auslagern der Konfigurationsvariablen aus
[RCN- 600 ], siehe dort für die vorhergehende Historie
CVs 900.2 / 940.2 / 980.2 für Herstellerkennung 2
```
#### 1.

Copyright 2024 RailCommunity – Verband der Hersteller Digitaler Modellbahnprodukte e.V.


